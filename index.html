<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>TO-BE ìœ ì € í”Œë¡œìš° â€” ì¤‘ì†Œê¸°ì—…/ìŠ¤íƒ€íŠ¸ì—…</title>
<style>
:root{
  --acc:#E04F00; --acc2:#ff8c4a;
  --bg:#f6f5f2; --white:#fff;
  --dk:#141414; --md:#4a4a4a; --lt:#b8b5b0; --bd:#e2e0db;
  --exitbg:#fff2f2; --exitbd:#f0aaaa; --exitdk:#b91c1c; --exitlbl:#d42020;
}
*{margin:0;padding:0;box-sizing:border-box;}
html,body{
  width:100%;height:100%;background:#b8b6b1;
  display:flex;align-items:center;justify-content:center;overflow:hidden;
}

/* â”€â”€ 16:9 ìŠ¤í…Œì´ì§€ â”€â”€ */
.S{
  position:relative;
  width:100vw;height:56.25vw;
  max-height:100vh;max-width:177.78vh;
  background:var(--bg);overflow:hidden;
  cursor:pointer;user-select:none;
  font-family:'Apple SD Gothic Neo','Noto Sans KR','ë§‘ì€ ê³ ë”•',sans-serif;
}
.S::before{
  content:'';position:absolute;inset:0;pointer-events:none;z-index:0;
  background-image:
    linear-gradient(rgba(0,0,0,.024)1px,transparent 1px),
    linear-gradient(90deg,rgba(0,0,0,.024)1px,transparent 1px);
  background-size:3.8% 6.7%;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ìƒë‹¨ 52% : íŒíŠ¸/ë¼ë²¨ + ì´íƒˆì¹´ë“œ + ë°°ì§€ + í† í°
   í•˜ë‹¨ 48% : ë³´ë“œ(5 íƒ€ì¼)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â”€â”€ íŒíŠ¸ â”€â”€ */
.HINT{
  position:absolute;top:4%;
  left:50%;transform:translateX(-50%);
  z-index:20;
  display:flex;align-items:center;gap:.5%;
  white-space:nowrap;
  font-size:1.1vw;font-weight:500;color:var(--md);
  transition:opacity .5s;
}
.HINT.off{opacity:0;pointer-events:none;}
.pd{
  flex-shrink:0;
  width:.8vw;height:.8vw;border-radius:50%;background:var(--acc);
  animation:pd 1.5s ease-in-out infinite;
}
@keyframes pd{0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.8);opacity:.28}}

/* â”€â”€ ìƒíƒœ ë¼ë²¨ (ëŒ€ì œëª©) â€” ìƒë‹¨ ì¤‘ì•™, HDRê³¼ ê²¹ì¹˜ì§€ ì•Šë„ë¡ max-width ì œí•œ â”€â”€ */
.LBAR{
  position:absolute;
  top:3%;
  left:50%;transform:translateX(-50%);
  z-index:20;
  background:var(--white);border:2.5px solid var(--acc);border-radius:999px;
  padding:.55% 2.4%;
  /* HDRì´ ì¢Œì¸¡ ~42% ì°¨ì§€ â†’ ë¼ë²¨ì€ ìµœëŒ€ 50% ë„ˆë¹„ê¹Œì§€ë§Œ í—ˆìš© */
  max-width:50%;
  white-space:nowrap;
  overflow:hidden;text-overflow:ellipsis;
  font-size:1.5vw;
  font-weight:900;color:var(--acc);letter-spacing:-.02em;
  text-align:center;
  box-shadow:0 .25vw 1.8vw rgba(224,79,0,.18);
  opacity:0;transition:opacity .38s;
}
.LBAR.on{opacity:1;}

/* â”€â”€ ë³´ë“œ â€” í•˜ë‹¨ 48% â”€â”€ */
.BOARD{
  position:absolute;
  bottom:0;left:0;right:0;
  height:48%;
  display:flex;align-items:stretch;
  padding:0 2% 2.5% 2%;
  gap:1%;
  z-index:5;
}

/* â”€â”€ íƒ€ì¼ â”€â”€ */
.tile{
  flex:1;
  background:var(--white);border:2.5px solid var(--bd);
  border-radius:1.6vw;overflow:hidden;
  display:flex;flex-direction:column;
  box-shadow:0 .35vw 1.8vw rgba(0,0,0,.08);
  transition:border-color .4s,box-shadow .4s,transform .4s,opacity .4s;
}
.tile.active{
  border-color:var(--acc);
  box-shadow:0 .7vw 3vw rgba(224,79,0,.28);
  transform:translateY(-.5vw);
}
.tile.done{opacity:.42;}

.tile .tbar{height:.4vw;background:var(--bd);flex-shrink:0;transition:background .4s;}
.tile.active .tbar{background:var(--acc);}

.tile .ti{padding:5% 7% 6%;flex:1;display:flex;flex-direction:column;}
.tile .sn{
  font-size:.78vw;font-weight:900;letter-spacing:.12em;
  text-transform:uppercase;color:var(--lt);margin-bottom:7%;
  transition:color .3s;
}
.tile.active .sn{color:var(--acc);}
.tile .ico{font-size:3vw;line-height:1;margin-bottom:5%;}
.tile .tn{
  font-size:1.25vw;font-weight:900;color:var(--dk);
  line-height:1.25;letter-spacing:-.02em;margin-bottom:5%;
}
.tile .hr{height:1.5px;background:#ececec;margin-bottom:5%;}
.tile .td{
  font-size:.82vw;color:var(--md);
  line-height:1.75;font-weight:400;word-break:keep-all;
}

/* â”€â”€ ì»¤ë„¥í„° â”€â”€ */
.conn{
  flex:0 0 1.2%;
  display:flex;align-items:center;justify-content:center;
  font-size:1.5vw;color:#c8c5bf;opacity:.5;padding-bottom:2%;
}

/* â”€â”€ í† í° â”€â”€ */
#TOK{
  position:absolute;z-index:30;
  width:7vw;height:7vw;border-radius:50%;
  background:linear-gradient(135deg,var(--acc),var(--acc2));
  box-shadow:0 .55vw 2.5vw rgba(224,79,0,.55),0 .15vw .6vw rgba(0,0,0,.18);
  display:flex;align-items:center;justify-content:center;
  font-size:3.2vw;line-height:1;
  transition:left .75s cubic-bezier(.65,0,.35,1),top .75s cubic-bezier(.65,0,.35,1),opacity .4s;
  will-change:left,top;
}
#TOK.hide{opacity:0;pointer-events:none;}
#TOK.bnc{animation:bnc .5s ease;}
@keyframes bnc{
  0%{transform:scale(1)}35%{transform:scale(1.28)translateY(-10%)}
  68%{transform:scale(.93)}100%{transform:scale(1)}
}

/* â”€â”€ ì´íƒˆ ì¹´ë“œ â”€â”€ */
.ECARD{
  position:absolute;z-index:40;
  background:var(--exitbg);border:2px solid var(--exitbd);
  border-radius:1.2vw;
  /* ìµœëŒ€ ë„ˆë¹„ ì œí•œ, ë„˜ì¹˜ì§€ ì•Šë„ë¡ */
  width:26vw;max-width:82%;
  padding:1.6% 2%;
  box-shadow:0 .7vw 3vw rgba(180,0,0,.14);
  opacity:0;pointer-events:none;
  transform:translateY(.8vw) scale(.9);
  transition:opacity .38s,transform .38s;
}
.ECARD.on{
  opacity:1;transform:translateY(0) scale(1);
  animation:shk .5s ease .04s;
}
@keyframes shk{
  0%,100%{transform:rotate(0) scale(1)}
  20%{transform:rotate(-1.6deg) scale(1)}
  40%{transform:rotate(1.6deg) scale(1)}
  60%{transform:rotate(-.8deg) scale(1)}
  80%{transform:rotate(.4deg) scale(1)}
}

/* ì¹´ë“œ ë ˆì´ë¸” â€” ëŒ€ì œëª© ê¸°ì¤€ -3pt ëŠë‚Œìœ¼ë¡œ ê³„ì¸µí™” */
/* ëŒ€ì œëª©(LBAR) = 1.5vw â†’ ë ˆì´ë¸” = 0.78vw (ì†Œë¬¸ì ê°•ì¡°) â†’ ë³¸ë¬¸ = 1.08vw */
.ECARD .elbl{
  font-size:.78vw;          /* LBAR ëŒ€ë¹„ ì•½ -3pt ëŠë‚Œ */
  font-weight:900;color:var(--exitlbl);
  text-transform:uppercase;letter-spacing:.09em;
  margin-bottom:.55vw;
}
.ECARD .emain{
  font-size:1.08vw;         /* ëŒ€ì œëª©(1.5vw) ê¸°ì¤€ -3pt = ì•½ 1.08vw */
  color:var(--exitdk);
  line-height:1.5;font-weight:700;letter-spacing:-.01em;
  word-break:keep-all;
}

/* ì ì„  í™”ì‚´í‘œ */
.EARR{
  position:absolute;z-index:39;
  opacity:0;pointer-events:none;
  transition:opacity .3s .08s;overflow:visible;
}
.EARR.on{opacity:1;}

/* â”€â”€ ê°œì„  ë°°ì§€ â”€â”€ */
/* ëŒ€ì œëª©(1.5vw) ê¸°ì¤€ -3pt = 1.08vw */
.FBADGE{
  position:absolute;z-index:41;
  background:var(--acc);color:#fff;
  border-radius:999px;
  /* ë„˜ì¹˜ì§€ ì•Šë„ë¡ max-width ì„¤ì • */
  max-width:84%;
  padding:.65vw 1.8vw;
  font-size:1.08vw;         /* ëŒ€ì œëª© ê¸°ì¤€ -3pt */
  font-weight:800;
  line-height:1.3;text-align:center;letter-spacing:-.01em;
  word-break:keep-all;white-space:nowrap;
  box-shadow:0 .3vw 1.4vw rgba(224,79,0,.46);
  opacity:0;pointer-events:none;
  transform:scale(.65)translateY(.6vw);
  transition:opacity .38s,transform .38s;
}
.FBADGE.on{opacity:1;transform:scale(1)translateY(0);}

/* â”€â”€ ì™„ë£Œ ì˜¤ë²„ë ˆì´ â”€â”€ */
#DONE{
  position:absolute;z-index:60;
  top:26%;left:50%;transform:translateX(-50%) scale(.84);
  background:var(--white);border:3.5px solid var(--acc);border-radius:2vw;
  padding:2.5% 5%;text-align:center;
  max-width:50%;
  box-shadow:0 1.5vw 6vw rgba(224,79,0,.24);
  opacity:0;pointer-events:none;
  transition:opacity .45s,transform .45s;
}
#DONE.on{opacity:1;transform:translateX(-50%) scale(1);pointer-events:auto;}
#DONE .di{font-size:5vw;display:block;margin-bottom:.5vw;}
#DONE .dt{font-size:2.2vw;font-weight:900;color:var(--dk);letter-spacing:-.03em;}
#DONE .ds{font-size:.95vw;color:var(--acc);margin-top:.4vw;font-weight:700;}
#DONE .rb{
  margin-top:1.2vw;display:inline-block;
  background:var(--acc);color:#fff;border-radius:999px;
  padding:.6vw 2vw;font-size:.9vw;font-weight:800;
  cursor:pointer;border:none;transition:background .2s;
}
#DONE .rb:hover{background:#c94500;}

/* â”€â”€ ì¢Œìƒë‹¨ ì œëª© ë¸”ë¡ â”€â”€ */
.HDR{
  position:absolute;
  top:2.8%;left:2.5%;
  z-index:15;
  /* ì¤‘ì•™ LBAR(max-width 88%, ì¤‘ì•™ ì •ë ¬) ì™€ ê²¹ì¹˜ì§€ ì•Šë„ë¡
     ì˜¤ë¥¸ìª½ ëì„ í™”ë©´ 45% ì§€ì ê¹Œì§€ë§Œ í—ˆìš© */
  max-width:42%;
}
.HDR .htitle{
  font-size:1.55vw;       /* ì œëª© ê¸°ì¤€ í¬ê¸° */
  font-weight:900;
  color:var(--dk);
  letter-spacing:-.025em;
  line-height:1.25;
  /* ì˜ë¦¬ì§€ ì•Šë„ë¡ white-space normal + word-break */
  white-space:normal;
  word-break:keep-all;
}
.HDR .htitle em{
  color:var(--acc);
  font-style:normal;
}
.HDR .hsub{
  margin-top:.4vw;
  /* ì œëª©(1.55vw) ê¸°ì¤€ -2pt â‰ˆ 1.27vw */
  font-size:1.05vw;
  font-weight:500;
  color:var(--md);
  line-height:1.65;
  word-break:keep-all;
  white-space:normal;
}
.HDR .hsub b{
  color:var(--acc);
  font-weight:700;
}

/* â”€â”€ ì§„í–‰ ì  â”€â”€ */
.DOTS{position:absolute;bottom:1.2%;right:2%;display:flex;gap:.55%;z-index:50;}
.dot{width:.55vw;height:.55vw;border-radius:50%;background:var(--bd);transition:background .3s,transform .3s;}
.dot.on{background:var(--acc);transform:scale(1.55);}
</style>
</head>
<body>
<div class="S" id="S">

  <!-- â”€â”€ ì¢Œìƒë‹¨ ì œëª© ë¸”ë¡ â”€â”€ -->
  <div class="HDR">
    <div class="htitle">TO-BE ìœ ì € í”Œë¡œìš° <em>(ì¤‘ì†Œê¸°ì—…/ìŠ¤íƒ€íŠ¸ì—…)</em></div>
    <div class="hsub">
      STEP1 ìœ ì… <b>â†’</b> STEP2 ì‹ ë¢° ê²€ì¦ <b>â†’</b> STEP3 ìœ ëŒ€ê° í˜•ì„±
      <br>STEP4 ì„œë¹„ìŠ¤ ìƒì„¸ <b>â†’</b> STEP5 ìƒë‹´ ì‹ ì²­
    </div>
  </div>

  <div class="HINT" id="HINT"><div class="pd"></div>í™”ë©´ì„ í´ë¦­í•˜ë©´ ì‹œì‘ë©ë‹ˆë‹¤</div>
  <div class="LBAR" id="LBAR"></div>

  <!-- â”€â”€ ë³´ë“œ â”€â”€ -->
  <div class="BOARD">
    <div class="tile" id="t1">
      <div class="tbar"></div>
      <div class="ti">
        <div class="sn">STEP 1</div>
        <div class="ico">ğŸ </div>
        <div class="tn">í™ˆ</div>
        <div class="hr"></div>
        <div class="td">ë©”ì¸ íˆì–´ë¡œ ì„¹ì…˜ ì„œë¹„ìŠ¤ ì •ì²´ì„± í™•ì¸<br>(ìš°ë¦¬ ê·œëª¨/ìƒí™©ì— ë§ëŠ”<br>í†µí•© ì¸í”„ë¼ì¸ê°€?)</div>
      </div>
    </div>
    <div class="conn">â–¶</div>
    <div class="tile" id="t2">
      <div class="tbar"></div>
      <div class="ti">
        <div class="sn">STEP 2</div>
        <div class="ico">ğŸ”</div>
        <div class="tn">ì‹ ë¢° ê²€ì¦</div>
        <div class="hr"></div>
        <div class="td">ê³ ê°ì‚¬ë¡€ - ì‚°ì—…ë³„ ì‚¬ë¡€ ì§„ì…</div>
      </div>
    </div>
    <div class="conn">â–¶</div>
    <div class="tile" id="t3">
      <div class="tbar"></div>
      <div class="ti">
        <div class="sn">STEP 3</div>
        <div class="ico">ğŸ“Š</div>
        <div class="tn">ìœ ëŒ€ê° í˜•ì„±</div>
        <div class="hr"></div>
        <div class="td">'ì‚¬ì˜¥ ì´ì „/í†µí•© êµ¬ì¶•' ë“±<br>ìœ ì‚¬ ê·œëª¨/ìƒí™© ì‚¬ë¡€ í™•ì¸</div>
      </div>
    </div>
    <div class="conn">â–¶</div>
    <div class="tile" id="t4">
      <div class="tbar"></div>
      <div class="ti">
        <div class="sn">STEP 4</div>
        <div class="ico">âš™ï¸</div>
        <div class="tn">ë²”ìœ„/ì„œë¹„ìŠ¤ í™•ì¸</div>
        <div class="hr"></div>
        <div class="td">ì†”ë£¨ì…˜> ì‚¬ì—… / ìë£Œì‹¤<br>êµ¬ì¶• ë¦¬ìŠ¤íŠ¸ ë° ë²”ìœ„ í™•ì¸<br>(ì„œë¹„ìŠ¤ ì •ë³´ ëª…í™•í™”)</div>
      </div>
    </div>
    <div class="conn">â–¶</div>
    <div class="tile" id="t5">
      <div class="tbar"></div>
      <div class="ti">
        <div class="sn">STEP 5</div>
        <div class="ico">ğŸ“‹</div>
        <div class="tn">ìƒë‹´ ì‹ ì²­</div>
        <div class="hr"></div>
        <div class="td">[Contact] ì´ë™ ë° ë¬¸ì˜<br>â†’ 3-step í¼</div>
      </div>
    </div>
  </div>

  <!-- â”€â”€ í† í° â”€â”€ -->
  <div id="TOK" class="hide">ğŸ¯</div>

  <!-- â”€â”€ STEP1 ì˜¤ë²„ë ˆì´ â”€â”€ -->
  <div class="ECARD" id="ec1">
    <div class="elbl">âš  AS-IS ì´íƒˆ í¬ì¸íŠ¸</div>
    <div class="emain">ì´íƒˆ: ì—”ì§€ë‹ˆì–´ìš© ì•½ì–´ ì¤‘ì‹¬ ë…¸ì¶œ, ì¸ì§€ì  ê³¼ë¶€í•˜</div>
  </div>
  <svg class="EARR" id="ea1" width="28" viewBox="0 0 28 60" height="60">
    <path d="M14 0 L14 48" stroke="#f0aaaa" stroke-width="2.5" fill="none" stroke-dasharray="5 4"/>
    <polygon points="7,46 14,60 21,46" fill="#f0aaaa"/>
  </svg>
  <div class="FBADGE" id="fb1">âœ…  í•´ê²°: ì•½ì–´ ìµœì†Œí™” + í•œ/ì˜ ë³‘ê¸° + GNB ì¬í¸</div>

  <!-- â”€â”€ STEP4 ì˜¤ë²„ë ˆì´ â”€â”€ -->
  <div class="ECARD" id="ec4">
    <div class="elbl">âš  AS-IS ì´íƒˆ í¬ì¸íŠ¸</div>
    <div class="emain">ì´íƒˆ: í•˜ë“œì›¨ì–´ ì‚¬ì–‘(CPU, í¬íŠ¸ ë“±) ì •ë³´ì— ì¹˜ì¤‘, ì •ë³´ ë¶ˆê· í˜•</div>
  </div>
  <svg class="EARR" id="ea4" width="28" viewBox="0 0 28 60" height="60">
    <path d="M14 0 L14 48" stroke="#f0aaaa" stroke-width="2.5" fill="none" stroke-dasharray="5 4"/>
    <polygon points="7,46 14,60 21,46" fill="#f0aaaa"/>
  </svg>
  <div class="FBADGE" id="fb4">âœ…  í•´ê²°: ìƒì„¸ í˜ì´ì§€ íˆì–´ë¡œ ì„¹ì…˜ ì„œë¹„ìŠ¤ ì†Œê°œì„œ(êµ¬ì¶•Â·ìš´ì˜Â·ì§€ì› ë²”ìœ„) CTA ë°°ì¹˜</div>

  <!-- â”€â”€ STEP5 ì˜¤ë²„ë ˆì´ â”€â”€ -->
  <div class="ECARD" id="ec5">
    <div class="elbl">âš  AS-IS ì´íƒˆ í¬ì¸íŠ¸</div>
    <div class="emain">ì´íƒˆ: ì„œë¹„ìŠ¤/ìœ í˜•ë³„ êµ¬ë¶„ ì—†ëŠ” ë‹¨ì¼ ë¬¸ì˜ ì–‘ì‹</div>
  </div>
  <svg class="EARR" id="ea5" width="28" viewBox="0 0 28 60" height="60">
    <path d="M14 0 L14 48" stroke="#f0aaaa" stroke-width="2.5" fill="none" stroke-dasharray="5 4"/>
    <polygon points="7,46 14,60 21,46" fill="#f0aaaa"/>
  </svg>
  <div class="FBADGE" id="fb5">âœ…  í•´ê²°: ìœ í˜• ì„ íƒí˜• 3-step í¼</div>

  <!-- â”€â”€ ì™„ë£Œ â”€â”€ -->
  <div id="DONE">
    <span class="di">âœ…</span>
    <div class="dt">ìƒë‹´ ì‹ ì²­ ì™„ë£Œ!</div>
    <div class="ds">TO-BE ìœ ì € í”Œë¡œìš° ì™„ì£¼ ğŸ‰</div>
    <button class="rb" id="RB">â†© ì²˜ìŒë¶€í„° ë‹¤ì‹œ</button>
  </div>

  <div class="DOTS" id="DOTS"></div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ì‹œí€€ìŠ¤ â€” ë‚´ìš© ìˆ˜ì • ì‹œ ì—¬ê¸°ë§Œ ë°”ê¾¸ë©´ ë©ë‹ˆë‹¤
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const SEQ=[
  // 0 ì´ˆê¸°
  {lbl:null,tile:0,tok:0,
   show:[],hide:['ec1','ea1','fb1','ec4','ea4','fb4','ec5','ea5','fb5','DONE']},
  // 1 STEP1 ë„ì°©
  {lbl:'STEP 1 â€” ì„œë¹„ìŠ¤ ì •ì²´ì„± í™•ì¸',
   tile:1,tok:1,show:[],hide:[]},
  // 2 STEP1 ì´íƒˆì¹´ë“œ
  {lbl:'âš  AS-IS â€” ê³µê¸‰ì ì¤‘ì‹¬ ì•½ì–´ ë…¸ì¶œ â†’ ì¸ì§€ì  ê³¼ë¶€í•˜',
   tile:1,tok:1,show:['ec1','ea1'],hide:[]},
  // 3 STEP1 ê°œì„ ë°°ì§€
  {lbl:'âœ… TO-BE â€” ì•½ì–´ ìµœì†Œí™” + í•œ/ì˜ ë³‘ê¸° + GNB ì¬í¸',
   tile:1,tok:1,show:['fb1'],hide:['ec1','ea1']},
  // 4 STEP2
  {lbl:'STEP 2 â€” ê³ ê°ì‚¬ë¡€ íƒìƒ‰',
   tile:2,tok:2,show:[],hide:['fb1']},
  // 5 STEP3 ë„ì°©
  {lbl:'STEP 3 â€” ìœ ì‚¬ ê·œëª¨/ìƒí™© ì‚¬ë¡€ë¡œ ìœ ëŒ€ê° í˜•ì„±',
   tile:3,tok:3,show:[],hide:[]},
  // 6 STEP4 ì´ë™
  {lbl:'STEP 4 â€” êµ¬ì¶• ë²”ìœ„/ì„œë¹„ìŠ¤ í™•ì¸',
   tile:4,tok:4,show:[],hide:[]},
  // 7 STEP4 ì´íƒˆì¹´ë“œ
  {lbl:'âš  AS-IS â€” ì‚¬ì–‘ ì •ë³´ í¸ì¤‘ "ë¬´ì—‡ê¹Œì§€ í•´ì£¼ëŠ”ì§€" íŒë‹¨ ë¶ˆê°€',
   tile:4,tok:4,show:['ec4','ea4'],hide:[]},
  // 8 STEP4 ê°œì„ ë°°ì§€
  {lbl:"âœ… TO-BE â€” ìƒì„¸ í˜ì´ì§€ 'ì„œë¹„ìŠ¤ ì†Œê°œì„œ' ë‹¤ìš´ë¡œë“œ CTA ë°°ì¹˜",
   tile:4,tok:4,show:['fb4'],hide:['ec4','ea4']},
  // 9 STEP5 ë„ì°©
  {lbl:'STEP 5 â€” ìƒë‹´ ì‹ ì²­(ë¬¸ì˜ ë‹¨ê³„ ì§„ì…)',
   tile:5,tok:5,show:[],hide:['fb4']},
  // 10 STEP5 ì´íƒˆì¹´ë“œ
  {lbl:'âš  AS-IS â€” ì„œë¹„ìŠ¤/ìœ í˜• êµ¬ë¶„ ì—†ëŠ” ë‹¨ì¼ ë¬¸ì˜ ì–‘ì‹ â†’ ì‹ ë¢° ì €í•˜',
   tile:5,tok:5,show:['ec5','ea5'],hide:[]},
  // 11 STEP5 ê°œì„ ë°°ì§€
  {lbl:'âœ… TO-BE â€” ìœ í˜• ì„ íƒí˜• 3-step í¼',
   tile:5,tok:5,show:['fb5'],hide:['ec5','ea5']},
  // 12 ì™„ë£Œ
  {lbl:null,tile:5,tok:5,show:['DONE'],hide:['fb5']},
];
const TOTAL=SEQ.length-1;

const S=document.getElementById('S');
const tok=document.getElementById('TOK');
const lbar=document.getElementById('LBAR');
const hint=document.getElementById('HINT');
const dotsW=document.getElementById('DOTS');

for(let i=0;i<TOTAL;i++){
  const d=document.createElement('div');d.className='dot';d.id='d'+i;dotsW.appendChild(d);
}

let cur=0,busy=false;

function tPos(n){
  const sr=S.getBoundingClientRect();
  const tr=document.getElementById('t'+n).getBoundingClientRect();
  return{cx:tr.left-sr.left+tr.width/2, tileTop:tr.top-sr.top};
}

function place(n){
  const sr=S.getBoundingClientRect();
  const sw=sr.width, sh=sr.height;
  const {cx,tileTop}=tPos(n);
  const tokH=tok.offsetHeight;
  const tokW=tok.offsetWidth;

  // í† í° y
  const tokTop=tileTop-tokH-16;

  const card=document.getElementById('ec'+n);
  const arrow=document.getElementById('ea'+n);
  const badge=document.getElementById('fb'+n);
  if(!card)return;

  const cw=card.offsetWidth;
  const ch=card.offsetHeight;

  // ì¹´ë“œ: í† í° ìœ„ë¡œ, ìµœì†Œ top 12% í™•ë³´
  const minTop=sh*0.12;
  const desiredCardTop=tokTop-ch-18;
  const cardTop=Math.max(minTop, desiredCardTop);

  // ì¹´ë“œ left: í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°€ì§€ ì•Šë„ë¡ í´ë¨í”„
  const rawLeft=cx-cw/2;
  const cardLeft=Math.max(sw*0.01, Math.min(rawLeft, sw*0.99-cw));
  card.style.left=cardLeft+'px';
  card.style.top=cardTop+'px';

  // í™”ì‚´í‘œ ë†’ì´: ì¹´ë“œ ë°”ë‹¥ ~ í† í° ìƒë‹¨
  const arrTop=cardTop+ch;
  const arrH=Math.max(tokTop-arrTop, 20);
  arrow.setAttribute('height',arrH);
  arrow.setAttribute('viewBox',`0 0 28 ${arrH}`);
  arrow.querySelector('path').setAttribute('d',`M14 0 L14 ${arrH-13}`);
  arrow.querySelector('polygon').setAttribute('points',`7,${arrH-14} 14,${arrH} 21,${arrH-14}`);
  // í™”ì‚´í‘œ x: í† í° ì¤‘ì‹¬
  arrow.style.left=(cx-14)+'px';
  arrow.style.top=arrTop+'px';

  // ë°°ì§€: ì¹´ë“œ ìë¦¬ì— (ë„ˆë¹„ í´ë¨í”„)
  if(badge){
    // ë Œë” í›„ ë„ˆë¹„ ì¸¡ì •
    badge.style.visibility='hidden';badge.style.opacity='0';badge.style.transform='none';
    const bw=badge.offsetWidth;
    badge.style.visibility='';badge.style.opacity='';badge.style.transform='';
    const rawBLeft=cx-bw/2;
    const bLeft=Math.max(sw*0.01, Math.min(rawBLeft, sw*0.99-bw));
    badge.style.left=bLeft+'px';
    badge.style.top=cardTop+'px';
  }
}

function apply(idx,anim){
  const s=SEQ[idx];

  // ë¼ë²¨
  if(s.lbl){lbar.textContent=s.lbl;lbar.classList.add('on');}
  else lbar.classList.remove('on');

  // íƒ€ì¼
  for(let i=1;i<=5;i++){
    const t=document.getElementById('t'+i);
    t.classList.remove('active','done');
    if(i===s.tile) t.classList.add('active');
    else if(i<s.tile) t.classList.add('done');
  }

  // í† í°
  if(s.tok===0){
    tok.classList.add('hide');
  } else {
    tok.classList.remove('hide');
    const {cx,tileTop}=tPos(s.tok);
    const tx=cx-tok.offsetWidth/2;
    const ty=tileTop-tok.offsetHeight-16;

    if(!anim){
      tok.style.transition='none';
      tok.style.left=tx+'px';tok.style.top=ty+'px';
    } else {
      const prev=idx>0?SEQ[idx-1].tok:0;
      const mv=prev!==s.tok;
      tok.style.transition=mv
        ?'left .75s cubic-bezier(.65,0,.35,1),top .75s cubic-bezier(.65,0,.35,1),opacity .4s'
        :'left .3s,top .3s,opacity .4s';
      tok.style.left=tx+'px';tok.style.top=ty+'px';
      if(mv) setTimeout(()=>{tok.classList.remove('bnc');void tok.offsetWidth;tok.classList.add('bnc');},780);
    }

    if([1,4,5].includes(s.tok)){
      requestAnimationFrame(()=>place(s.tok));
    }
  }

  s.show.forEach(id=>{const e=document.getElementById(id);if(e)e.classList.add('on');});
  s.hide.forEach(id=>{const e=document.getElementById(id);if(e)e.classList.remove('on');});

  S.style.cursor=idx===TOTAL?'default':'pointer';
  for(let i=0;i<TOTAL;i++){const d=document.getElementById('d'+i);if(d)d.classList.toggle('on',i+1===idx);}
  if(idx>=1) hint.classList.add('off');
  if(idx===0) hint.classList.remove('off');
}

function next(){if(busy||cur>=TOTAL)return;busy=true;cur++;apply(cur,true);setTimeout(()=>{busy=false;},460);}
function reset(){
  cur=0;
  document.querySelectorAll('.ECARD,.EARR,.FBADGE,#DONE').forEach(e=>e.classList.remove('on'));
  apply(0,false);
}

S.addEventListener('click',e=>{if(e.target.closest('#RB'))return;if(cur===TOTAL)return;next();});
document.getElementById('RB').addEventListener('click',e=>{e.stopPropagation();reset();});
window.addEventListener('load',()=>apply(0,false));
window.addEventListener('resize',()=>apply(cur,false));
</script>
</body>
</html>
